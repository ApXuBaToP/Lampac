FROM mcr.microsoft.com/dotnet/sdk:6.0-bookworm-slim-arm64v8

EXPOSE 9118
WORKDIR /home

RUN apt-get update
RUN apt-get install -y wget unzip

RUN wget https://github.com/immisterio/Lampac/releases/latest/download/publish.zip && \
	unzip -o publish.zip && rm -f publish.zip && rm -rf dlna merchant && \
	touch isdocker

RUN apt-get install -y chromium

RUN echo '{"puppeteer":{"executablePath":"/usr/bin/chromium"}, "isarm":true, "mikrotik":true, "serverproxy":{"verifyip":false}}' > /home/init.conf

ENTRYPOINT ["dotnet", "Lampac.dll"]