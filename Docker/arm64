FROM --platform=linux/arm64 mcr.microsoft.com/dotnet/sdk:6.0-bookworm-slim-arm64v8

export DOCKER_DEFAULT_PLATFORM=linux/arm64

RUN apt update && apt install -y wget unzip ffmpeg && \
	wget https://github.com/immisterio/Lampac/releases/latest/download/publish.zip && \
	unzip -o publish.zip && rm -f publish.zip && rm -rf ffprobe && \
	touch isdocker

EXPOSE 9118

ENTRYPOINT ["dotnet", "Lampac.dll"]